{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$.ajaxSetup({\n    headers: {\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n});\n\nvar CreateUrlForm = {\n    init: function() {\n        this.bindEvents();\n    },\n    bindEvents: function() {\n        var self = this;\n        $(document).on('click', '#show-add-url-form', $.proxy(this.showModal, this));\n    },\n    showModal: function() {\n        swal({\n            title: 'Make Url Little',\n            input: 'text',\n            showCancelButton: true,\n            confirmButtonText: 'Make Little',\n            showLoaderOnConfirm: true,\n            preConfirm: $.proxy(this.saveUrl, this),\n            allowOutsideClick: false\n        }).then(this.showSuccessMessage);\n    },\n    saveUrl: function(url) {\n        var self = this;\n        return new Promise(function(resolve, reject) {\n            var data = {\n                url: url\n            };\n\n            $.post('/url/create', data)\n                .done(function(response) {\n                    setTimeout(function() {\n                        self.refreshPage();\n                        resolve();\n                    }, 1000)\n                })\n                .fail(function(jqXHR, textStatus, errorThrown) {\n                    reject(jqXHR.responseJSON.url[0]);\n                });\n        });\n    },\n    showSuccessMessage: function() {\n        swal({\n            title: 'Success!',\n            text: 'Url Made Little.',\n            type: 'success',\n            timer: 2000\n        });\n    },\n    refreshPage: function() {\n        if (typeof UrlList != 'undefined') {\n            UrlList.loadUrlList();\n        } else if (window.location.pathname === '/account') {\n            window.location.reload();\n        }\n    }\n};\n\n$(function() {\n    CreateUrlForm.init();\n});\n"],"sourceRoot":"/source/"}